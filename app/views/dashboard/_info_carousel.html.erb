<!-- app/views/shared/_info_carousel.html.erb -->
<!-- Info Carousel with Getting Started Steps and Support -->
<div id="infoCarousel" class="card bg-gradient-to-br from-primary/10 to-primary/5 shadow-xl border border-primary/20 relative overflow-hidden">
  <div class="card-body p-6 flex flex-col">
    <!-- Wrapper for carousel items with fixed height -->
    <div id="carouselItems" class="carousel-items-container flex-grow mb-8 min-h-[220px]">
      <!-- Item 1: Getting Started Tip 1 -->
      <div class="carousel-item h-full flex flex-col">
        <div class="flex flex-col items-center mb-4">
          <div class="w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mb-2">
            <svg class="w-8 h-8 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-success text-center">Getting Started - Step 1</h3>
        </div>
        <p class="text-base-content/70 text-sm mb-4 text-center flex-grow">
          <span class="font-medium">1.</span> Start by either opening your existing <strong>Master CV</strong> to populate it with your data, or importing the demo data to see how it works.
        </p>
        <div class="flex flex-col sm:flex-row sm:justify-center gap-3 mt-auto">
          <%= link_to "Go to Master CV", master_cv_index_path, class: "btn btn-success btn-sm" %>
          <%= button_to 'Import Demo CV',
              new_import_cv_data_path,
              method: :get,
              class: "btn btn-primary btn-sm",
              data: { confirm: 'This will replace all your current CV data with demo data. Are you sure?' } %>
        </div>
      </div>
      
      <!-- Item 2: Getting Started Tip 2 -->
      <div class="carousel-item hidden h-full flex flex-col">
        <div class="flex flex-col items-center mb-4">
          <div class="w-16 h-16 bg-info/20 rounded-full flex items-center justify-center mb-2">
            <svg class="w-8 h-8 text-info" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-info text-center">Getting Started - Step 2</h3>
        </div>
        <p class="text-base-content/70 text-sm mb-4 text-center flex-grow">
          <span class="font-medium">2.</span> Go to the <strong>Tags</strong> section and <strong>Edit Tags</strong> to create or manage your tag categories and their colors.
        </p>
        <div class="flex justify-center mt-auto">
          <%= link_to "Manage Tags", edit_tags_path, class: "btn btn-info btn-sm" %>
        </div>
      </div>
      
      <!-- Item 3: Getting Started Tip 3 -->
      <div class="carousel-item hidden h-full flex flex-col">
        <div class="flex flex-col items-center mb-4">
          <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mb-2">
            <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-primary text-center">Getting Started - Step 3</h3>
        </div>
        <p class="text-base-content/70 text-sm mb-4 text-center flex-grow">
          <span class="font-medium">3.</span> Use the <strong>"Tags to Items"</strong> link to assign the tags you created to your specific CV items (skills, projects, etc.).
        </p>
        <div class="flex justify-center mt-auto">
          <%= link_to "Link Tags to Items", item_taggings_path, class: "btn btn-primary btn-sm" %>
        </div>
      </div>
      
      <!-- Item 4: Getting Started Tip 4 -->
      <div class="carousel-item hidden h-full flex flex-col">
        <div class="flex flex-col items-center mb-4">
          <div class="w-16 h-16 bg-secondary/20 rounded-full flex items-center justify-center mb-2">
            <svg class="w-8 h-8 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-secondary text-center">Getting Started - Step 4</h3>
        </div>
        <p class="text-base-content/70 text-sm mb-4 text-center flex-grow">
          <span class="font-medium">4.</span> Go back to the <strong>Dashboard</strong>, create a new <strong>Template</strong>, preview your CV as HTML, or generate and download the PDF.
        </p>
        <div class="flex justify-center mt-auto">
          <%= link_to "Back to Dashboard", dashboard_path, class: "btn btn-secondary btn-sm" %>
        </div>
      </div>
      
      <!-- Item 5: Support Message -->
      <div class="carousel-item hidden h-full flex flex-col">
        <div class="flex flex-col items-center mb-4">
          <div class="w-16 h-16 bg-warning/20 rounded-full flex items-center justify-center mb-2">
            <svg class="w-8 h-8 text-warning" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-warning text-center">Support My Work</h3>
        </div>
        <p class="text-warning text-sm mb-4 text-center flex-grow">If you find this tool helpful, consider buying me a coffee!</p>
        <div class="flex justify-center mt-auto">
          <a href="https://buymeacoffee.com/catalinplesu" target="_blank" rel="noopener noreferrer" class="btn btn-warning btn-sm">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.9 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/>
            </svg>
            Buy me a coffee
          </a>
        </div>
      </div>
    </div>
    
    <!-- Bottom Controls Container -->
    <div class="mt-auto pt-4 flex justify-between items-center px-2">
      <!-- Previous Button -->
      <button id="carouselPrev" class="btn btn-circle btn-xs btn-ghost">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>
      
      <!-- Indicators and Next Button Group -->
      <div class="flex items-center space-x-3">
        <!-- Carousel Indicators (Dots) -->
        <div id="carouselIndicators" class="flex space-x-2">
          <!-- Dots will be generated by JavaScript -->
        </div>
      </div>
      
      <!-- Next Button -->
      <button id="carouselNext" class="btn btn-circle btn-xs btn-ghost">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>
    </div>
  </div>
</div>

<style>
  /* Custom styles for carousel indicators */
  .carousel-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    cursor: pointer;
  }
  
  .carousel-indicator.active {
    width: 16px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 8px;
  }
</style>

<script>
  // JavaScript to initialize the carousel with styled indicators
  document.addEventListener('DOMContentLoaded', function() {
    const carouselItems = document.getElementById('carouselItems');
    const items = carouselItems.querySelectorAll('.carousel-item');
    const indicatorsContainer = document.getElementById('carouselIndicators');
    const prevButton = document.getElementById('carouselPrev');
    const nextButton = document.getElementById('carouselNext');
    
    let currentIndex = 0;
    
    // Create indicators
    items.forEach((_, index) => {
      const indicator = document.createElement('div');
      indicator.classList.add('carousel-indicator');
      if (index === 0) indicator.classList.add('active');
      indicator.addEventListener('click', () => showSlide(index));
      indicatorsContainer.appendChild(indicator);
    });
    
    function showSlide(index) {
      // Hide all items
      items.forEach(item => item.classList.add('hidden'));
      
      // Show current item
      items[index].classList.remove('hidden');
      
      // Update indicators
      document.querySelectorAll('.carousel-indicator').forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });
      
      currentIndex = index;
    }
    
    function nextSlide() {
      let newIndex = (currentIndex + 1) % items.length;
      showSlide(newIndex);
    }
    
    function prevSlide() {
      let newIndex = (currentIndex - 1 + items.length) % items.length;
      showSlide(newIndex);
    }
    
    // Add event listeners
    nextButton.addEventListener('click', nextSlide);
    prevButton.addEventListener('click', prevSlide);
    
    // Auto-advance every 8 seconds (optional)
    setInterval(nextSlide, 8000);
  });
</script>
