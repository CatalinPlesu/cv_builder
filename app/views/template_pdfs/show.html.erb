<div class="max-w-4xl mx-auto p-6">
  <div class="bg-white rounded-lg shadow-md p-6">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">PDF Generation Status</h1>
    
    <div class="mb-6">
      <h2 class="text-lg font-semibold text-gray-700 mb-2">Template: <%= @template_pdf.template.name %></h2>
      <p class="text-gray-600">For: <%= @template_pdf.user.email %></p>
    </div>

    <div class="bg-gray-50 rounded-lg p-4 mb-6">
      <div class="flex items-center justify-between mb-3">
        <h3 class="font-medium text-gray-800">Status Information</h3>
        <span class="px-3 py-1 rounded-full text-sm font-medium 
          <%= case @template_pdf.status 
              when 'completed' then 'bg-green-100 text-green-800'
              when 'processing' then 'bg-blue-100 text-blue-800'
              when 'pending' then 'bg-yellow-100 text-yellow-800'
              when 'failed' then 'bg-red-100 text-red-800'
              else 'bg-gray-100 text-gray-800'
              end %>">
          <%= @template_pdf.status.titleize %>
        </span>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
        <div>
          <p class="text-gray-500">Created</p>
          <p class="font-medium"><%= @template_pdf.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
        </div>
        
        <% if @template_pdf.started_at %>
          <div>
            <p class="text-gray-500">Started Processing</p>
            <p class="font-medium"><%= @template_pdf.started_at.strftime("%B %d, %Y at %I:%M %p") %></p>
          </div>
        <% end %>
        
        <% if @template_pdf.completed_at %>
          <div>
            <p class="text-gray-500">Completed</p>
            <p class="font-medium"><%= @template_pdf.completed_at.strftime("%B %d, %Y at %I:%M %p") %></p>
          </div>
          
          <% if @template_pdf.duration %>
            <div>
              <p class="text-gray-500">Processing Time</p>
              <p class="font-medium"><%= distance_of_time_in_words(@template_pdf.duration) %></p>
            </div>
          <% end %>
        <% end %>
        
        <% if @template_pdf.pending? && @template_pdf.queue_position %>
          <div>
            <p class="text-gray-500">Queue Position</p>
            <p class="font-medium">#<%= @template_pdf.queue_position %></p>
          </div>
        <% end %>
        
        <% if @template_pdf.pending? && @template_pdf.estimated_wait_time_human %>
          <div>
            <p class="text-gray-500">Estimated Wait Time</p>
            <p class="font-medium"><%= @template_pdf.estimated_wait_time_human %></p>
          </div>
        <% end %>
      </div>
    </div>

    <% if @template_pdf.error_message.present? %>
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
        <h4 class="font-medium text-red-800 mb-2">Error Details</h4>
        <p class="text-red-700 text-sm"><%= @template_pdf.error_message %></p>
      </div>
    <% end %>

    <div class="flex flex-wrap gap-3">
      <% if @template_pdf.pdf_available? %>
        <%= link_to download_template_pdf_path(@template_pdf), 
                    class: "px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          Download PDF
        <% end %>
      <% end %>
      
      <%= link_to template_path(@template_pdf.template), 
                  class: "px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors" do %>
        Back to Template
      <% end %>
      
      <%= link_to template_pdf_path(@template_pdf), 
                  method: :delete,
                  data: { confirm: "Are you sure you want to delete this PDF?" },
                  class: "px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors" do %>
        Delete PDF
      <% end %>
    </div>
  </div>
</div>
